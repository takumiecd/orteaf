schema_version: "1.0"

architectures:
  - id: "Sm80"
    display_name: "CUDA SM80"
    execution: "Cuda"
    metadata:
      parent: "CudaGeneric"
      description: "Ampere 世代 GPU (A100 など) 向け最適化"
      detect:
        vendor: "nvidia"
        compute_capability: 80

  - id: "Sm86"
    display_name: "CUDA SM86"
    execution: "Cuda"
    metadata:
      parent: "Sm80"
      description: "Ampere 世代 GPU (RTX 30 シリーズ) 向け最適化"
      detect:
        vendor: "nvidia"
        compute_capability: 86

  - id: "Sm90"
    display_name: "CUDA SM90"
    execution: "Cuda"
    metadata:
      parent: "Sm80"
      description: "Hopper 世代 GPU (H100 など) 向け最適化"
      detect:
        vendor: "nvidia"
        compute_capability: 90

  - id: "M2"
    display_name: "Apple M2 GPU"
    execution: "Mps"
    metadata:
      parent: "MpsGeneric"
      description: "Apple Silicon M2 世代 GPU 向け最適化"
      detect:
        vendor: "apple"
        metal_family: "m2"

  - id: "M3"
    display_name: "Apple M3 GPU"
    execution: "Mps"
    metadata:
      parent: "MpsGeneric"
      description: "Apple Silicon M3 世代 GPU 向け最適化"
      detect:
        vendor: "apple"
        metal_family: "m3"

  - id: "M4"
    display_name: "Apple M4 GPU"
    execution: "Mps"
    metadata:
      parent: "MpsGeneric"
      description: "Apple Silicon M4 世代 GPU 向け最適化"
      detect:
        vendor: "apple"
        metal_family: "m4"

  - id: "AppleM4Pro"
    display_name: "Apple M4 Pro GPU"
    execution: "Mps"
    metadata:
      parent: "M4"
      description: "Apple Silicon M4 Pro GPU 向け最適化"
      detect:
        vendor: "apple"
        metal_family: "m4" # Overlaps with M4, but specific to Pro if we add machine_ids or so.
        machine_ids: ["Mac16,6", "Mac16,7", "Mac16,8"]

  - id: "Zen4"
    display_name: "Zen 4 AVX512"
    execution: "Cpu"
    metadata:
      parent: "CpuGeneric"
      description: "Zen 4 / AVX-512 対応 CPU 向け最適化"
      detect:
        vendor: "amd"
        family: 25
        features: ["avx512"]

  - id: "Skylake"
    display_name: "Skylake AVX512"
    execution: "Cpu"
    metadata:
      parent: "CpuGeneric"
      description: "Intel Skylake-X / AVX-512 対応 CPU 向け最適化"
      detect:
        vendor: "intel"
        family: 6
        model: [85]
        features: ["avx512"]

  - id: "IntelCometLake"
    display_name: "Intel Comet Lake"
    execution: "Cpu"
    metadata:
      parent: "CpuGeneric"
      description: "Comet Lake ファミリ (Core i9-10850K など) 向けの AVX2 最適化"
      detect:
        vendor: "intel"
        family: 6
        model: [165, 166]
        features: ["avx2"]
